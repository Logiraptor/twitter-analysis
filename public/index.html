<html>
    <body>
        <style type="text/css">
        html, body { height: 100%; margin: 0; padding: 0; }
        .content {margin-left: auto; margin-right: auto; width: 1000px;}
        .map { width: 100%; height: 80%; display: inline-block;}
        .bounded { overflow: auto; height: 500px;}
        </style>
        <div class="content">
            <div class="map" id="map"></div>
            <div id="elm-land"></div>
        </div>
        <script type="text/javascript" src="/main.js"></script>
        <script type="text/javascript">
            function initMaps() {
                var points = [];
                var map;
                map = new google.maps.Map(document.getElementById('map'), {
                    center: {lat: 39.5, lng: -98.35},
                    zoom: 4
                });
                var heatmap = new google.maps.visualization.HeatmapLayer({
                    data: points,
                    dissipating: true
                });
                heatmap.setMap(map);

                var output = document.getElementById("elm-land");
                var app = Elm.Main.embed(output);

                app.ports.coords.subscribe(function(data) {
                    var coord = new google.maps.LatLng(data[1], data[0]);
                    points.push(coord);
                    heatmap.setData(points);
                });
            }
        </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA90Of7M7LqIJVI5Xa-vlqBGAyNvWfu3l4&callback=initMaps&libraries=visualization">
        </script>
    </body>
</html>
